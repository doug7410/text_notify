=render 'shared/page_header', title: "Customers"
%hr
.row
  .col-sm-12
= render 'customer_form', title: 'Add a customer', button_label: 'Add'
.space-6
%hr
=render 'shared/page_header', title: "Your Customers"

%table#sample-table-1.table.table-striped.table-bordered.table-hover
  %thead
    %tr
      %th Customer Info
      %th Phone Number
      %th Has Been Sent Notifications?
      %th 
  %tbody
    -@customers.each do |customer|
      %tr
        %td= customer.name
        %td= customer.display_phone_number
        %td
          - if customer.notifications.any? 
            %span.label.label-sm.label-primary.arrowed.arrowed-right Yes
            =link_to "View Notifications", customer
          -else
            %span.label.label-sm.label-yellow.arrowed.arrowed-right No
              
        %td
          =link_to customer_path(customer), id: "edit_#{customer.id}" do
            %button.btn.btn-primary.btn-sm
              %i.ace-icon.fa.fa-pencil.align-top.bigger-125
              Edit
          =link_to customer_path(customer), data: { :confirm => "Are you sure you want to delete #{customer.name}?" }, :method => :delete, id: "delete_#{customer.id}" do
            %button.btn.btn-danger.btn-sm
              %i.ace-icon.fa.fa-trash-o.align-top.bigger-125
              Delete
%script{:src => "/assets/js/jquery-ui.custom.min.js"}
%script{:src => "/assets/js/jquery.maskedinput.min.js"}
:javascript
  jQuery(function($) {
    $.mask.definitions['~']='[+-]';
    $('.input-mask-phone').mask('(999) 999-9999');
  });       
            
